controller:
  installPlugins:
    - kubernetes
    - workflow-aggregator
    - git
    - configuration-as-code
    - job-dsl
    - terraform
    - ansible
  JCasC:
    configScripts:
      config: |
        jenkins:
          systemMessage: "Jenkins configured automatically by Jenkins Configuration as Code plugin"
        tool:
            terraform:
              installations:
                - name: "terraform"
                  properties:
                    - installSource:
                        installers:
                          - terraformInstaller:
                              id: "20413-linux-amd64"
        jobs:
          - script: >
              pipelineJob('main') {
                definition {
                  cpsScm {
                    scm {
                      git {
                        remote {
                          url('https://github.com/loktev-d/ecommerce-backend')
                        }
                        branch('*/main')
                      }
                    }
                    lightweight()
                  }
                }
              }

persistence:
  size: "3Gi"
